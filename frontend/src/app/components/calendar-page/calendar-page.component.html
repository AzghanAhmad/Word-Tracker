<div class="calendar-page-container">
    <!-- Loading State -->
    <app-content-loader *ngIf="isLoading"></app-content-loader>

    <ng-container *ngIf="!isLoading">
        <!-- Top Brand Header -->
        <header class="top-header">
            <div class="brand">
                <span class="brand-text">{{ username }}</span>
                <span class="brand-star">â˜…</span>
            </div>
            <div class="header-actions">
                <button class="action-btn cyan">Account Settings</button>
                <button class="action-btn cyan">Your Stats</button>
            </div>
        </header>

        <!-- Navigation Tabs -->


        <div class="view-controls-bar">
            <div class="btn-group">
                <button class="control-btn" [class.active]="viewMode === 'daily-total'"
                    (click)="setViewMode('daily-total')">
                    Show Daily Total Planned Work Across All Plans
                </button>
                <button class="control-btn" [class.active]="viewMode === 'progress-vs-plan'"
                    (click)="setViewMode('progress-vs-plan')">
                    Show Progress and Planned Work for Each Plan
                </button>
            </div>

            <div class="btn-group">
                <button class="control-btn" [class.active]="timeFilter === 'future'" (click)="setTimeFilter('future')">
                    Show Only Future Planned Work
                </button>
                <button class="control-btn" [class.active]="timeFilter === 'all'" (click)="setTimeFilter('all')">
                    Show All Work (Past and Future)
                </button>
            </div>
        </div>

        <div class="calendar-wrapper">
            <app-calendar-header [monthName]="monthName" (next)="nextMonth()" (prev)="prevMonth()" (today)="goToday()"
                (viewChange)="setViewType($event)"></app-calendar-header>

            <app-calendar-grid [currentDate]="currentDate" [targets]="targets" [deadlines]="deadlines"
                [plansByDate]="plansByDate" [viewMode]="viewMode" [timeFilter]="timeFilter"
                [dailyLogs]="dailyLogs"></app-calendar-grid>
        </div>
    </ng-container>
</div>